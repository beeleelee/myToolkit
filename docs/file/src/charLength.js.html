<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/charLength.js | mytoolkit</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="my javascript toolkit"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="mytoolkit"><meta property="twitter:description" content="my javascript toolkit"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/deceleration.js~Deceleration.html">Deceleration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/tween.js~Tween.html">Tween</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-IDFactory">IDFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-addComma">addComma</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-addKey">addKey</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-charLength">charLength</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-currentTime">currentTime</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-deepCopy">deepCopy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isEmail">isEmail</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isSet">isSet</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isUInt">isUInt</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-padZero">padZero</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-randInt">randInt</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-randStr">randStr</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setStyle">setStyle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-strToDate">strToDate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-strToTime">strToTime</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-timeToStr">timeToStr</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-timestamp">timestamp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-trim">trim</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-typeOf">typeOf</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-performanceNow">performanceNow</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-tick">tick</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/charLength.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * this source come from www - https://www.cnblogs.com/dearxinli/p/7657512.html
/**
 * &#x8BA1;&#x7B97;&#x5B57;&#x7B26;&#x4E32;&#x6240;&#x5360;&#x7684;&#x5185;&#x5B58;&#x5B57;&#x8282;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;UTF-8&#x7684;&#x7F16;&#x7801;&#x65B9;&#x5F0F;&#x8BA1;&#x7B97;&#xFF0C;&#x4E5F;&#x53EF;&#x5236;&#x5B9A;&#x4E3A;UTF-16
 * UTF-8 &#x662F;&#x4E00;&#x79CD;&#x53EF;&#x53D8;&#x957F;&#x5EA6;&#x7684; Unicode &#x7F16;&#x7801;&#x683C;&#x5F0F;&#xFF0C;&#x4F7F;&#x7528;&#x4E00;&#x81F3;&#x56DB;&#x4E2A;&#x5B57;&#x8282;&#x4E3A;&#x6BCF;&#x4E2A;&#x5B57;&#x7B26;&#x7F16;&#x7801;
 * 
 * 000000 - 00007F(128&#x4E2A;&#x4EE3;&#x7801;)      0zzzzzzz(00-7F)                             &#x4E00;&#x4E2A;&#x5B57;&#x8282;
 * 000080 - 0007FF(1920&#x4E2A;&#x4EE3;&#x7801;)     110yyyyy(C0-DF) 10zzzzzz(80-BF)             &#x4E24;&#x4E2A;&#x5B57;&#x8282;
 * 000800 - 00D7FF 
   00E000 - 00FFFF(61440&#x4E2A;&#x4EE3;&#x7801;)    1110xxxx(E0-EF) 10yyyyyy 10zzzzzz           &#x4E09;&#x4E2A;&#x5B57;&#x8282;
  * 010000 - 10FFFF(1048576&#x4E2A;&#x4EE3;&#x7801;)  11110www(F0-F7) 10xxxxxx 10yyyyyy 10zzzzzz  &#x56DB;&#x4E2A;&#x5B57;&#x8282;
  * 
  * &#x6CE8;: Unicode&#x5728;&#x8303;&#x56F4; D800-DFFF &#x4E2D;&#x4E0D;&#x5B58;&#x5728;&#x4EFB;&#x4F55;&#x5B57;&#x7B26;
  * {@link http://zh.wikipedia.org/wiki/UTF-8}
  * 
  * UTF-16 &#x5927;&#x90E8;&#x5206;&#x4F7F;&#x7528;&#x4E24;&#x4E2A;&#x5B57;&#x8282;&#x7F16;&#x7801;&#xFF0C;&#x7F16;&#x7801;&#x8D85;&#x51FA; 65535 &#x7684;&#x4F7F;&#x7528;&#x56DB;&#x4E2A;&#x5B57;&#x8282;
  * 000000 - 00FFFF  &#x4E24;&#x4E2A;&#x5B57;&#x8282;
  * 010000 - 10FFFF  &#x56DB;&#x4E2A;&#x5B57;&#x8282;
  * 
  * {@link http://zh.wikipedia.org/wiki/UTF-16}
  * @param  {String} str 
  * @param  {String} charset utf-8, utf-16
  * @return {Number}
  */
export function charLength (str, charset) {
  let total = 0
  let charCode, i, len

  charset = charset ? charset.toLowerCase() : &apos;&apos;
  if (charset === &apos;utf-16&apos; || charset === &apos;utf16&apos;) {
    for (i = 0, len = str.length; i &lt; len; i++) {
      charCode = str.charCodeAt(i)
      if (charCode &lt;= 0xffff) {
        total += 2
      } else {
        total += 4
      }
    }
  } else {
    for (i = 0, len = str.length; i &lt; len; i++) {
      charCode = str.charCodeAt(i)
      if (charCode &lt;= 0x007f) {
        total += 1
      } else if (charCode &lt;= 0x07ff) {
        total += 2
      } else if (charCode &lt;= 0xffff) {
        total += 3
      } else {
        total += 4
      }
    }
  }
  return total
}

export default charLength</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
